<div id="the-whole-enchilada">

	<!-- Header has basic character info, and logo-->
	<div class="mlp-sheet-header">
		<img src="https://github.com/TerryEunice/PeterCharSheet/blob/main/banner3.png?raw=true" width="150">
		<div> 
			<label>Name</label>
			<input type="text" name="attr_character_name" class="input-width">
		</div>
		<div>
			<label>Pronouns</label>
			<input type="text" name="attr_pronoun" class="input-width">
		</div>
		<div>
			<label>Origin</label>
			<input type="text" name="attr_origin" class="input-width">
		</div>
		<div>
			<label>Role</label>
			<input type="text" name="attr_role" class="input-width">
		</div>
		<div>
			<label>Level</label>
			<input type="text" name="attr_level" class="input-width">
		</div>
	</div>

	<br>

	<!--Portrait and mid prioirty biographical info -->
	<div class="mlp-sheet-basic-info">
		<img name="attr_character_avatar" class="mlp-sheet-basic-info-photo" width="180">
		<div class="mlp-sheet-basic-info-desc basic-info-border mlp-sheet-padding">
			<label for="char-desc" class="text-margin-none">Description</label>
			<textarea id="char_desc" name="attr_char_desc"></textarea>
		</div>
		<div class="basic-info-border mlp-sheet-padding"> 
			<label for="influences" class="text-margin-none">Influences</label>
			<textarea id="influences" name="attr_influences"></textarea>
		</div>
		<div class="basic-info-border mlp-sheet-padding rounded-top-right">
			<label for="hang-ups" class="text-margin-none">Hang Ups</label>
			<textarea id="hang-ups" name="attr_hang-ups"></textarea>
		</div>
		<!-- Health -->
		<div class="basic-info-border mlp-sheet-padding">
			<label class="text-margin-none">Health</label>
			<div class="health-movement-grid">
				<label class ="text-size-small text-padding-none text-margin-none">Current</label>
				<label class ="text-size-small text-padding-none text-margin-none">Max</label>
				<input type="text" name="attr_current-health" class="two-char-text-box">
				<input type="text" name="attr_max-health" class="two-char-text-box">
			</div>
		</div>
		<!-- Movement -->
		<div class="basic-info-border mlp-sheet-padding">
			<label class="text-margin-none">Movement</label>
			<div class="health-movement-grid">
				<label for="ground-movement" class ="text-size-small text-padding-none text-margin-none">Ground</label>
				<label for="air-movement" class ="text-size-small text-padding-none text-margin-none">Air</label>
				<input type="text" id="ground-movement" name="attr_movement-ground" class="two-char-text-box">
				<input type="text" id="air_movement" name="attr_movement-air" class="two-char-text-box">
			</div>
		</div>
		<!-- Wealth -->
		<div class="basic-info-border mlp-sheet-padding">
			<label class="text-margin-none">Wealth</label>
			<div class="basic-flex-box">
				<select id="wealth" name="attr_wealth-die" class="die-dropdown">
					<option value="d0">0</option>
					<option value="d2">d2</option>
					<option value="d4">d4</option>
					<option value="d6">d6</option>
					<option value="d8">d8</option>
					<option value="d10">d10</option>
					<option value="d12">d12</option>
				</select> 
				<button type="action" name="act_wealth-roll" class="text-size-small">Roll Wealth</button>
			</div>
		</div>
		<!-- Friendship Points -->
		<div class="basic-info-border mlp-sheet-padding rounded-bottom-right">
			<label class="text-margin-none">Friendship Points</label>
			<input type="text" name="attr_friendship" class="two-char-text-box">
		</div>
	</div>

    <!-- Main Sheet Tabs --->
	<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="character" />
	<div>
		<button type="action" name="act_character" class="sheet-button0">Skills</button>
		<button type="action" name="act_journal" class="sheet-button1">Perks</button>
		<button type="action" name="act_configuration" class="sheet-button2">Spellcasting</button>
		<button type="action" name="act_inventory" class="sheet-button3">Inventory</button>
		<button type="action" name="act_notes" class="sheet-button4">Notes</button>
	</div>
	<!-- Skills tab -->
	<div class="sheet-skills">
		<div class="essence-grid">
		<div class="essence-header"> STRENGTH </div>
		<div class="essence-header"> SPEED </div>
		<div class="essence-header"> SMARTS </div>
		<div class="essence-header"> SOCIAL </div>
		<!-- STRENGTH ESSENCE COLUMN -->
		<div id="strength-column" class="essence-coulmn-grid">
			<!-- Toughness score + Essence D-->
			<div class="skill-grid">
				<div class="skill-grid-element specialization-name">
					<label for="toughness-score" class="text-padding-none">Toughness</label>
				</div>
				<input type="text" id="toughness-score" name="attr_toughness" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<div class="essence-defense-grid">
				<div class="skill-grid-element specialization-name">
					<label for="strength-essence" class ="text-size-small text-padding-none">Essence</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="strength-armour" class ="text-size-small text-padding-none">Armour</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="strength-modifier" class ="text-size-small text-padding-none">Modifier</label>
				</div>
				<input type="text" id="strength-essence" name="attr_strength" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="strength-armour" name="attr_strength-armour" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="strength-modifier" name="attr_strength-modifier" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<!-- ATHLETICS SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_athletics-roll" class="text-size-small">Athletics</button>
				</div>
				<div class="skill-grid-element">
					<select id="athletics" name="attr_athletics-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_athletics-spec" placeholder="Athletics Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- BRAWN SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_brawn-roll" class="text-size-small">Brawn</button>
				</div>
				<div class="skill-grid-element">
					<select id="brawn" name="attr_brawn-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_brawn-spec" placeholder="Brawn Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- CONDITIONING SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name text-size-small">
					<label for="conditioning-die" class="text-size-small text-padding-none">Conditioning</label>
				</div>
				<div class="skill-grid-element">
					<select id="conditioning-die" name="attr_conditioning-die" class="die-dropdown">
						<option value="0">0</option>
						<option value="1">+1</option>
						<option value="2">+2</option>
						<option value="3">+3</option>
						<option value="4">+4</option>
						<option value="5">+5</option>
						<option value="6">+6</option>
					</select> 
				</div>
			</div>
			<!-- INTIMIDATION SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_intimidation-roll" class="text-size-small">Intimidation</button>
				</div>
				<div class="skill-grid-element">
					<select id="intimidation" name="attr_intimidation-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_intimidation-spec" placeholder="Intimidation Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- MIGHT SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_might-roll" class="text-size-small">Might</button>
				</div>
				<div class="skill-grid-element">
					<select id="might" name="attr_might-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_might-spec" placeholder="Might Specialization" class="skill-grid-element specialization-box">
			</div>
		</div>
		<!-- SPEED ESSECNE COLUMN-->
		<div id="speed-column" class="essence-coulmn-grid">
			<!-- Evasion score + Essence D-->
			<div class="skill-grid">
				<div class="skill-grid-element specialization-name">
					<label for="evasion-score" class="text-padding-none">Evasion</label>
				</div>
				<input type="text" id="evasion-score" name="attr_evasion" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<div class="essence-defense-grid">
				<div class="skill-grid-element specialization-name">
					<label for="speed-essence" class ="text-size-small text-padding-none">Essence</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="speed-armour" class ="text-size-small text-padding-none">Armour</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="speed-modifier" class ="text-size-small text-padding-none">Modifier</label>
				</div>
				<input type="text" id="speed-essence" name="attr_speed" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="speed-armour" name="attr_speed-armour" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="speed-modifier" name="attr_speed-modifier" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<!--ACROBATICS SKILL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_acrobatics-roll" class="text-size-small">Acrobatics</button>
				</div>
				<div class="skill-grid-element">
					<select id="acrobatics" name="attr_acrobatics-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_acrobatics-spec" placeholder="Acrobatics Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- DRIVING SKILL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_driving-roll" class="text-size-small">Driving</button>
				</div>
				<div class="skill-grid-element">
					<select id="driving" name="attr_driving-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_driving-spec" placeholder="Driving Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- FINESSE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_finesse-roll" class="text-size-small">Finesse</button>
				</div>
				<div class="skill-grid-element">
					<select id="finesse" name="attr_finesse-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_finesse-spec" placeholder="Finesse Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- INFILTRAION SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_infiltration-roll" class="text-size-small">Infiltration</button>
				</div>
				<div class="skill-grid-element">
					<select id="infiltration" name="attr_infiltration-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_infiltration-spec" placeholder="Infiltration Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- INITIATIVE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name text-size-small">
					<button type="action" name="act_initiative-roll" class="text-size-small">Initiative</button>
				</div>
				<div class="skill-grid-element">
					<select id="initiative-die" name="attr_initiative-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
			</div>
			<!-- TARGETING SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_targeting-roll" class="text-size-small">Targeting</button>
				</div>
				<div class="skill-grid-element">
					<select id="targeting" name="attr_targeting-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_targetingn-spec" placeholder="Targeting Specialization" class="skill-grid-element specialization-box">
			</div>
		</div>
		<!-- SMARTS ESSECNE COLUMN-->
		<div id="smarts-column" class="essence-coulmn-grid">
			<!-- Willpower score + Essence D-->
			<div class="skill-grid">
				<div class="skill-grid-element specialization-name">
					<label for="willpower-score" class="text-padding-none">Willpower</label>
				</div>
				<input type="text" id="willpower-score" name="attr_willpower" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<div class="essence-defense-grid">
				<div class="skill-grid-element specialization-name">
					<label for="smarts-essence" class ="text-size-small text-padding-none">Essence</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="smarts-armour" class ="text-size-small text-padding-none">Armour</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="smarts-modifier" class ="text-size-small text-padding-none">Modifier</label>
				</div>
				<input type="text" id="smarts-essence" name="attr_smarts" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="smarts-armour" name="attr_smarts-armour" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="smarts-modifier" name="attr_smarts-modifier" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<!-- ALERTNESS SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_alertness-roll" class="text-size-small">Alertness</button>
				</div>
				<div class="skill-grid-element">
					<select id="alertness" name="attr_alertness-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_alertness-spec" placeholder="Alertness Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- CULTURE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_culture-roll" class="text-size-small">Culture</button>
				</div>
				<div class="skill-grid-element">
					<select id="culture" name="attr_culture-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_culture-spec" placeholder="Culture Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- SCIENCE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_science-roll" class="text-size-small">Science</button>
				</div>
				<div class="skill-grid-element">
					<select id="science" name="attr_science-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_science-spec" placeholder="Science Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- SURVIVAL SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_survival-roll" class="text-size-small">Survival</button>
				</div>
				<div class="skill-grid-element">
					<select id="survival" name="attr_survival-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_survival-spec" placeholder="Survival Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- TECHNOLOGY SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_technology-roll" class="text-size-small">Technology</button>
				</div>
				<div class="skill-grid-element">
					<select id="technology" name="attr_technology-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_technology-spec" placeholder="Technology Specialization" class="skill-grid-element specialization-box">
			</div>
		</div>
		<!-- SOCIAL ESSECNE COLUMN-->
		<div id="social-column" class="essence-coulmn-grid">
			<!-- Cleverness score + Essence D-->
			<div class="skill-grid">
				<div class="skill-grid-element specialization-name">
					<label for="willpower-score" class="text-padding-none">Cleverness</label>
				</div>
				<input type="text" id="cleverness-score" name="attr_cleverness" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<div class="essence-defense-grid">
				<div class="skill-grid-element specialization-name">
					<label for="social-essence" class ="text-size-small text-padding-none">Essence</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="social-armour" class ="text-size-small text-padding-none">Armour</label>
				</div>
				<div class="skill-grid-element specialization-name">
					<label for="social-modifier" class ="text-size-small text-padding-none">Modifier</label>
				</div>
				<input type="text" id="social-essence" name="attr_social" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="social-armour" name="attr_social-armour" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
				<input type="text" id="social-modifier" name="attr_social-modifier" placeholder="0" class="skill-grid-element two-char-text-box" maxlength="2">
			</div>
			<!-- ANIMAL HANDLING SKILL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_animal-handling-roll" class="text-size-small">Animal Handling</button>
				</div>
				<div class="skill-grid-element">
					<select id="animal-handling" name="attr_animal-handling-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_animal-handling-spec" placeholder="Animal Handling Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- DECEPTION SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_deception-roll" class="text-size-small">Deception</button>
				</div>
				<div class="skill-grid-element">
					<select id="deception" name="attr_deception-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_deception-spec" placeholder="Deception Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- PERFORMANCE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_performance-roll" class="text-size-small">Performance</button>
				</div>
				<div class="skill-grid-element">
					<select id="performance" name="attr_performance-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_performance-spec" placeholder="Performance Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- PERSUASION SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_persuasion-roll" class="text-size-small">Persuasion</button>
				</div>
				<div class="skill-grid-element">
					<select id="persuasion" name="attr_persuasion-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_persuasion-spec" placeholder="Persuasion Specialization" class="skill-grid-element specialization-box">
			</div>
			<!-- STREETWISE SKIL-->
			<div class="skill-grid skill-grid-border">
				<div class="skill-grid-element specialization-name">
					<button type="action" name="act_streetwise-roll" class="text-size-small">Streetwise</button>
				</div>
				<div class="skill-grid-element">
					<select id="streetwise" name="attr_streetwise-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select> 
				</div>
				<input type="text" name="attr_streetwise-spec" placeholder="Streetwise Specialization" class="skill-grid-element specialization-box">
			</div>
		</div>
	</div>
	</div>
	<div class="sheet-journal">
		<!-- Perks -->
		<div class="spells-perks-grid">
			<div class="basic-flex-box vertical-flex padding-5-px outer-grid-item-border-background">
				<h3>Perks</h3>
				<fieldset class="repeating_perks">
					<div class="inner-grid-item-border-background padding-5-px">
						<div class="basic-flex-box">
							Name
							<input type="text" name="attr_perk-name">
							Uses
							<input type="text" class="two-char-text-box" name="attr_perk-usage_num">
						</div>
						<div class="basic-flex-box vertical-flex">
							Description
							<textarea name="attr_perk-desc"></textarea>
						</div>
					</div>
				</fieldset>
			</div>

			<!-- Spells section!-->
			<div class="basic-flex-box vertical-flex padding-5-px outer-grid-item-border-background">
				<div class="basic-flex-box">
					<h3>Spellcasting</h3>
					<select id="spellcasting" name="attr_spellcasting-die" class="die-dropdown">
						<option value="d0">0</option>
						<option value="d2">d2</option>
						<option value="d4">d4</option>
						<option value="d6">d6</option>
						<option value="d8">d8</option>
						<option value="d10">d10</option>
						<option value="d12">d12</option>
					</select>
					<button type="action" name="act_spellcasting-roll" class="text-size-small">Roll Spell</button>
				</div>
				<fieldset class="repeating_spells">
					<div class="basic-flex-box vertical-flex padding-5-px inner-grid-item-border-background">
						<div class="basic-flex-box">
							Spell
							<input type="text" name="attr_spell-name" class="input-width">
							Specalized?
							<input type="checkbox" name="attr_spell-specalized">
						</div>
						<div class="basic-flex-box centered-flex-grid-items">
							Tier
							<input type="text" name="attr_spell-tier" class="two-char-text-box">
							Circle
							<select name="attr_spellcasting-circle" class="horizontal-margin-5px">
								<option value="aid">Aid</option>
								<option value="beam">Beam</option>
								<option value="enchant">Enchantment</option>
								<option value="utility">Utility</option>
							</select>
						</div>
						<div class="basic-flex-box">
							Cost 
							<input type="text" name="attr_spell-cost" class="two-char-text-box">
							Duration 
							<input type="text" name="attr_spell-duration" class="two-char-text-box">
							Range 
							<input type="text" name="attr_spell-range" class="two-char-text-box">
							
						</div>
						<div class="basic-flex-box vertical-flex">
							Description
							<textarea name="attr_spell-desc"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			
			<!--Bonds-->
			<div class="basic-flex-box vertical-flex padding-5-px outer-grid-item-border-background">
				<h3>Bonds</h3>
				<fieldset class="repeating_bonds">
					<div class="inner-grid-item-border-background padding-5-px">
						<div class="basic-flex-box">
							Name
							<input type="text" name="attr_bond-name">
						</div>
						<div class="basic-flex-box vertical-flex">
							Description
							<textarea name="attr_bond-desc"></textarea>
						</div>
					</div>
				</fieldset>
			</div>

			<!--Iventory-->
			<div class="basic-flex-box vertical-flex padding-5-px outer-grid-item-border-background">
				<h3>Inventory</h3>
				<fieldset class="repeating_inventory">
					<div class="inner-grid-item-border-background padding-5-px">
						<div class="basic-flex-box">
							Name
							<input type="text" name="attr_item-name">
							Amount
							<input type="text" name="attr_item-amount" class="two-char-text-box">
						</div>
						<div class="basic-flex-box vertical-flex">
							Description
							<textarea name="attr_item-desc"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>
	<div class="sheet-configuration">
		<div class="basic-flex-box vertical-flex padding-5-px outer-grid-item-border-background">
			<h3>Perks</h3>
			<fieldset class="repeating_perks">
				<div class="inner-grid-item-border-background padding-5-px">
					<div class="basic-flex-box">
						Name
						<input type="text" name="attr_perk-name">
						Uses
						<input type="text" class="two-char-text-box" name="attr_perk-usage_num">
					</div>
					<div class="basic-flex-box vertical-flex">
						Description
						<textarea name="attr_perk-desc"></textarea>
					</div>
				</div>
			</fieldset>
		</div>
	</div>
	<div class="sheet-inventory">
		<h2>Izzy says hi</h2>
	</div>
	<div class="sheet-notes">
		<h2>Dizzy says hi</h2>
	</div>
</div>

<!-- Roll templates --->
<rolltemplate class="sheet-rolltemplate-skill-die">
    <div class="sheet-template-container">
        <h3>{{roll-type}}</h3>
        <div class="sheet-results">
			<!--Normal Display-->
			{{#rollBetween() roll2 -1 25}}
				<h4 class="flex-items-stretch">D20 {{roll1}}</h4>
				<h4 class="flex-items-stretch">Skill Dice {{roll2}}</h4>
				<h4>Total {{computed::roll1}}</h4>
			{{/rollBetween() roll2 -1 25}}
			<!--Auto Pass/Fail Display-->
			{{#rollBetween() roll2 29 39}}
                <h4 class="sheet-good-roll">Auto Pass</h4>
            {{/rollBetween() roll2 29 39}}
			{{#rollBetween() roll2 39 49}}
                <h4 class="sheet-good-roll">Auto Crit</h4>
            {{/rollBetween() roll2 39 49}}
			{{#rollTotal() roll2 -20}}
				<h4 class="sheet-bad-roll">Auto Fail</h4>
			{{/rollTotal() roll2 -20}}			
			{{#rollTotal() roll2 -40}}
				<h4 class="sheet-bad-roll">Auto Fumble</h4>
			{{/rollTotal() roll2 -40}}
        </div>
    </div>
</rolltemplate>

<!-- SCRIPT!!!-->

<script type="text/worker">
    const buttonlist = ["character", "journal", "configuration", "inventory", "notes"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

	const DIE_LADDER = Object.freeze({ 
		AUTO_FUMBLE: -2,
		AUTO_FAIL: -1,
		BASE_DIE: 0,
		D2: 2,
		D4: 4,
		D6: 6,
		D8: 8,
		D10: 10,
		D12: 12,
		TWO_D8: 13,
		THREE_D6: 14,
		AUTO_PASS: 15,
		AUTO_CRIT: 16
	}); 

	const die_shift_string_base = "!{{upshift=[[?{Up/Down Shift?|No Shift, 0 |-2 (Auto Fumble), -2|-1 (Auto Fail), -1|+1 (d2), 2|+2 (d4), 4|+3 (d6), 6|+4 (d8), 8|+5 (d10), 10|+6 (d12), 12|+7 (2d8), 13|+8 (3d6), 14|+9 (Auto Success), 15|+10 (Auto Crit), 16|}]]}}";
	const die_shift_string_d2 =   "!{{upshift=[[?{Up/Down Shift?|No Shift, 2|-3 (Auto Fumble), -2|-2 (Auto Fail), -1|-1 (base die), 0|+1 (d4), 4|+2 (d6), 6|+3 (d8), 8|+4 (d10), 10|+5 (d12), 12|+6 (2d8), 13|+7 (3d6), 14|+8 (Auto Success), 15|+9 (Auto Crit), 16|}]]}}";
	const die_shift_string_d4 =   "!{{upshift=[[?{Up/Down Shift?|No Shift, 4|-4 (Auto Fumble), -2|-3 (Auto Fail), -1|-2 (base die), 0|-1 (d2), 2|+1 (d6), 6|+2 (d8), 8|+3 (d10), 10|+4 (d12), 12|+5 (2d8), 13|+6 (3d6), 14|+7 (Auto Success), 15|+8 (Auto Crit), 16|}]]}}";
	const die_shift_string_d6 =   "!{{upshift=[[?{Up/Down Shift?|No Shift, 6|-5 (Auto Fumble), -2|-4 (Auto Fail), -1|-3 (base die), 0|-2 (d2), 2|-1 (d4), 4|+1 (d8), 8|+2 (d10), 10|+3 (d12), 12|+4 (2d8), 13|+5 (3d6), 14|+6 (Auto Success), 15|+7 (Auto Crit), 16|}]]}}";
	const die_shift_string_d8 =   "!{{upshift=[[?{Up/Down Shift?|No Shift, 8|-6 (Auto Fumble), -2|-5 (Auto Fail), -1|-4 (base die), 0|-3 (d2), 2|-2 (d4), 4|-1 (d6), 6|+1 (d10), 10|+2 (d12), 12|+3 (2d8), 13|+4 (3d6), 14|+5 (Auto Success), 15|+6 (Auto Crit), 16|}]]}}";
	const die_shift_string_d10 =  "!{{upshift=[[?{Up/Down Shift?|No Shift, 10|-7 (Auto Fumble), -2|-6 (Auto Fail), -1|-5 (base die), 0|-4 (d2), 2|-3 (d4), 4|-2 (d6), 6|-1 (d8), 8|+1 (d12), 12|+2 (2d8), 13|+3 (3d6), 14|+4 (Auto Success), 15|+5 (Auto Crit), 16|}]]}}";
	const die_shift_string_d12 =  "!{{upshift=[[?{Up/Down Shift?|No Shift, 12|-8 (Auto Fumble), -2|-7 (Auto Fail), -1|-6 (base die), 0|-5 (d2), 2|-4 (d4), 4|-3 (d6), 6|-2 (d8), 8|-1 (d10), 10|+1 (2d8), 13|+2 (3d6), 14|+3 (Auto Success), 15|+4 (Auto Crit), 16|}]]}}";
	
	const default_roll_string_start = "&{template:skill-die} {{roll-type=";
	const default_roll_string_end = " Roll}}  {{roll1=[[?{Edge/Snag?|Normal,1d20|Edge,2d20kh1|Snag,2d20kl1}]]}}";
	const unskilled_roll_string_end = " Roll}}  {{roll1=[[?{Snag/Normal?|Snag,2d20kl1|Normal,1d20}]]}}";
	
	/* @brief This function selects the dice upshift string based 
	 * on the base die input.
	 * @param skilld_ie - string representing base die value
	 * @result - string with upshift roll queryRoll
	 */
	function upshfit_die_query(skill_die) 
	{
		let die_string;
		
		switch (skill_die){
			case "0":
				die_string = die_shift_string_base;
				break;
			case "d2":
				die_string = die_shift_string_d2;
				break;
			case "d4":
				die_string = die_shift_string_d4;
				break;
			case "d6":
				die_string = die_shift_string_d6;
				break;
			case "d8":
				die_string = die_shift_string_d8;
				break;
			case "d10":
				die_string = die_shift_string_d10;
				break;
			case "d12":
				die_string = die_shift_string_d12;
				break;
			default:
				console.log("Whoops! No macthing skill die!");
				die_string = die_shift_string_base;
		}
		return die_string;
	}
	/* @brief generates skill die string based on input die value
	 * and specialization flag
	 * @param final_die_val - integer representing die value enum
	 * @param is_speced - boolean flag to pick between specalized and non-specialized die strings
	 * @result - string for skill die roll
	 */
	function create_skill_die_string(final_die_val, is_speced)
	{
		let skill_die_string;
		
		/*Special case for auto fail, auto pass, etc.)*/
		switch(final_die_val)
		{
			case DIE_LADDER.BASE_DIE:
				skill_die_string = "0";
				return skill_die_string;
			case DIE_LADDER.AUTO_FUMBLE:
				skill_die_string = "-40";
				return skill_die_string;
			case DIE_LADDER.AUTO_FAIL:
				skill_die_string =  "-20";
				return skill_die_string;
			case DIE_LADDER.AUTO_PASS:
				skill_die_string =  "30";
				return skill_die_string;
			case DIE_LADDER.AUTO_CRIT:
				skill_die_string = "40";
				return skill_die_string;
		}
		
		if(is_speced === 0)
		{ 
			switch(final_die_val)
			{
				case DIE_LADDER.D2:
					skill_die_string = "d2";
					break;
				case DIE_LADDER.D4:
					skill_die_string = "d4";
					break;
				case DIE_LADDER.D6:
					skill_die_string = "d6";
					break;
				case DIE_LADDER.D8:
					skill_die_string = "d8";
					break;
				case DIE_LADDER.D10:
					skill_die_string = "d10";
					break;
				case DIE_LADDER.D12:
					skill_die_string = "d12";
					break;
				case DIE_LADDER.TWO_D8:
					skill_die_string = "2d8";
					break;
				case DIE_LADDER.THREE_D6:
					skill_die_string = "3d6";
					break;
				default:
					console.log("Whoops, no valid die!");
			}
		}
		else
		{
			switch(final_die_val)
			{
				case DIE_LADDER.D2:
					skill_die_string = "d2";
					break;
				case DIE_LADDER.D4:
					skill_die_string = "{d2,d4}kh1";
					break;
				case DIE_LADDER.D6:
					skill_die_string = "{d2,d4,d6}kh1";
					break;
				case DIE_LADDER.D8:
					skill_die_string = "{d2,d4,d6,d8}kh1";
					break;
				case DIE_LADDER.D10:
					skill_die_string = "{d2,d4,d6,d8,d10}kh1";
					break;
				case DIE_LADDER.D12:
					skill_die_string = "{d2,d4,d6,d8,d10,d12}kh1";
					break;
				case DIE_LADDER.TWO_D8:
					skill_die_string = "{d2,d4,d6,d8,d10,d12,2d8}kh1";
					break;
				case DIE_LADDER.THREE_D6:
					skill_die_string = "{d2,d4,d6,d8,d10,d12,2d8,3d6}kh1";
					break;
				default:
					console.log("Whoops, no valid die!");
			}
		}
		return skill_die_string;
	}

	/* @brief function to generate skill roll and send results to template
	 * @param skill_to_roll - string matching the attribute name for the skill roll
	 * @param skill_name - string to display roll type in the output template
	 * @param has_specialization - boolean flag indicating if this skill uses the specalization system
	 */
    function skill_die_roll(skill_to_roll, skill_name, has_specialization)
	{
		getAttrs([skill_to_roll], async (values) => 
		{
			let roll_string;
			let speced;

			let skill_die = values[skill_to_roll];

			if(has_specialization === true)
			{
				let queryRoll = await startRoll("!{{spec=[[?{Specialized|No,0|Yes,1}]]}}");
				finishRoll(queryRoll.rollId);
				speced = queryRoll.results.spec.result;
			}
			else
			{
				speced = 0;
			}
			
			/*Here we can make another roll call to get the upshift or downshift*/
			roll_string = upshfit_die_query(skill_die);
			let shift_query = await startRoll(roll_string);
			finishRoll(shift_query.rollId);
			let final_die_val = shift_query.results.upshift.result;
			
			/*Unskilled rolls are done with snag*/
			let d20_roll_string_end = default_roll_string_end;
			if(skill_die == "d0")
			{
				d20_roll_string_end = unskilled_roll_string_end;
			}
			/*Then we can generate the final roll*/
			let skill_die_string = "{{roll2=[[" + create_skill_die_string(final_die_val, speced) + "]]}}";
			roll_string = default_roll_string_start + skill_name + d20_roll_string_end + skill_die_string;

			/*Then we pass the final roll to the roll thing*/
			let results = await startRoll(roll_string);
			
			const d20_roll = results.results.roll1.result;
			const skil_die_roll = results.results.roll2.result;
			const total = d20_roll+skil_die_roll;
			
			/*Send result to tracker if initiative roll*/
			if(skill_to_roll === "initiative-die")
			{
				let to_tracker = "!{{total=[[" + total.toString() + "&{tracker}]]}}";
				let tracker_roll = await startRoll(to_tracker);
				finishRoll(tracker_roll.rollId);
			}

			finishRoll(results.rollId,{roll1: total});	
		});
	}
	
	/* @brief Caculates and updates essence defense from
	 * essence, armour, and modifier fields.
	 * @param essence_name - attribute name for the essence to check.
	 * @param defense_name - attribute name for defense to update.
	 */
	function defense_update(essence_name, defense_name)
	{
		let essence_armour = essence_name + "-armour";
		let essence_modifier = essence_name + "-modifier";
		getAttrs([essence_name,essence_armour,essence_modifier], async (values) => 
		{
			let defense = 10 + Number(values[essence_name]) +  Number(values[essence_armour]) +  Number(values[essence_modifier]);
			defense = defense.toString();
			
			/*Hack for now*/
			switch(defense_name)
			{
				case "evasion":
					setAttrs({"evasion": defense});
					break;
				case "toughness":
					setAttrs({"toughness": defense});
					break;
				case "willpower":
					setAttrs({"willpower": defense});
					break;
				case "cleverness":
					setAttrs({"cleverness": defense});
					break;
				default:
					console.log("Input name not valid, try again.");
			}
		});
	}
	
	/*Strength Roll Buttons*/
	on('clicked:athletics-roll', async (info) => 
	{
		skill_die_roll("athletics-die", "Athletics", true);
    });
	on('clicked:brawn-roll', async (info) => 
	{
		skill_die_roll("brawn-die", "Brawn", true);
    });
	
	on('clicked:intimidation-roll', async (info) => 
	{
		skill_die_roll("intimidation-die", "Intimidation", true);
    });
    on('clicked:might-roll', async (info) => 
	{
		skill_die_roll("might-die", "Might", true);
    });
	
	/*Speed Roll Buttons*/
	on('clicked:acrobatics-roll', async (info) => 
	{
		skill_die_roll("acrobatics-die", "Acrobatics", true);
    });
	on('clicked:driving-roll', async (info) => 
	{
		skill_die_roll("driving-die", "Driving", true);
    });
	
	on('clicked:finesse-roll', async (info) => 
	{
		skill_die_roll("finesse-die", "Finesse", true);
    });
    on('clicked:infiltration-roll', async (info) => 
	{
		skill_die_roll("infiltration-die", "Infiltration", true);
    });
	on('clicked:targeting-roll', async (info) => 
	{
		skill_die_roll("targeting-die", "Targeting", true);
    });
	
	/*Smarts Roll Buttons*/
	on('clicked:alertness-roll', async (info) => 
	{
		skill_die_roll("alertness-die", "Alertness", true);
    });
	on('clicked:culture-roll', async (info) => 
	{
		skill_die_roll("culture-die", "Culture", true);
    });
	
	on('clicked:science-roll', async (info) => 
	{
		skill_die_roll("science-die", "Science", true);
    });
    on('clicked:survival-roll', async (info) => 
	{
		skill_die_roll("survival-die", "Survival", true);
    });
	on('clicked:technology-roll', async (info) => 
	{
		skill_die_roll("technology-die", "Technology", true);
    });
	
	/*Social Roll Buttons*/
	on('clicked:animal-handling-roll', async (info) => 
	{
		skill_die_roll("animal-handling-die", "Animal Handling", true);
    });
	on('clicked:deception-roll', async (info) => 
	{
		skill_die_roll("deception-die", "Deception", true);
    });
	
	on('clicked:performance-roll', async (info) => 
	{
		skill_die_roll("performance-die", "Performance", true);
    });
    on('clicked:persuasion-roll', async (info) => 
	{
		skill_die_roll("persuasion-die", "Persuasion", true);
    });
	on('clicked:streetwise-roll', async (info) => 
	{
		skill_die_roll("streetwise-die", "Streetwise", true);
    });
	
	/*Misc*/
	on('clicked:spellcasting-roll', async (info) => 
	{
		skill_die_roll("spellcasting-die", "Spell Casting", true);
    });
	
	on('clicked:wealth-roll', async (info) => 
	{
		skill_die_roll("wealth-die", "Wealth", false);
    });
	
	on('clicked:initiative-roll', async (info) => 
	{
		skill_die_roll("initiative-die", "Initiative", true);
    });
	
	/*Defenses Auto-Caculation-Script*/
	on("change:strength change:strength-armour change:strength-modifier", function(eventInfo) {
		defense_update("strength", "toughness");
	});

	on("change:speed change:speed-armour change:speed-modifier", function(eventInfo) {
		defense_update("speed", "evasion");
	});
	
	on("change:smarts change:smarts-armour change:smarts-modifier", function(eventInfo) {
		defense_update("smarts", "willpower");
	});
	
	on("change:social change:social-armour change:social-modifier", function(eventInfo) {
		defense_update("social", "cleverness");
	});
	
	
</script>
